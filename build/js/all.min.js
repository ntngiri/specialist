var specialist=angular.module("specialist",["ngRoute","specialist.droope"]).config(["$routeProvider","$locationProvider",function(l,t){l.when("/",{templateUrl:"./build/html/main.html",controller:"mainController"}).when("/search",{templateUrl:"./build/html/search.html",controller:"SearchCtrl"}).when("/doctorPortal",{templateUrl:"./build/html/doctorPortal.html",controller:"doctorPortalCtrl"}).when("/ques",{templateUrl:"./build/html/quesans.html"}).when("/docSignup",{templateUrl:"./build/html/docSignup.html",controller:"docSignupCtrl"}),t.html5Mode(!0)}]);
specialist.factory("dataService",["$http",function(t){return{getFullDoctorList:function(){return t.get("http://0.0.0.0:8080/doctor/list").then(function(t){return t.data})}}}]);
specialist.controller("docSignupCtrl",["$scope",function(r){r.secForm=!1,r.firstForm=!0;var s={};r.bringSecondForm=function(){s.name=r.fname+" "+r.lname,r.email==r.confEmail?s.email=r.email:r.email_err=!0,r.pass==r.confPass?s.password=r.pass:r.pass_err=!0,r.pass_err||r.email_err||(r.secForm=!0,r.firstForm=!1)}}]);
specialist.controller("doctorPortalCtrl",["$scope",function(o){}]);
angular.module("specialist.tagit",[]).directive("tagIt",function(){return{restrict:"EA",scope:{tags:"=",remove:"&"},template:'<div><ul class="tags"><li  class="tagit" ng-repeat="tag in tags "><span class="tagText">{{::tag.name}}</span><a  ng-click="remove({idx:tag.id})" class="dCross" href="javascript:;">x</a></li></ul></div>',link:function(e,t,a,i){}}}),angular.module("specialist.listing",[]).directive("ngRepeatDoneNotification",function(){return function(e,t,a){e.$parent.multiSelect||e.selectedId&&0!=e.selectedId.length&&e.$last&&!e.$parent.firstReapet&&(e.$parent.firstReapet=1,e.callback({item:{id:e.selectedId[0],name:e.data[e.idHash.indexOf(e.selectedId[0])].name,allSelected:e.selectedId,checked:null,first:!0}}))}}).directive("listing",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{data:"=",tupleCount:"@",selectedId:"=",maxHeight:"@",callback:"&listingCallback",multiSelect:"@",filterName:"=",active:"="},template:'<ul><li ng-repeat="item in data" ng-repeat-done-notification={{item.id}} ng-click="checkItem(this)" ng-class="{active:item.active, notSelectable:item.notSelectable}"><input ng-if="multiSelect == \'true\' && !item.notSelectable" type="checkbox" ng-model=item.checked>{{selectedName}}<div style="display:inline-block; width:auto;" ng-transclude></div></li></ul>',link:function(e,t,a,i){e.firstReapet=0,e.selObj={},e.idHash=[],e.data&&e.data.forEach(function(t){e.idHash.push(t.id)}),e.$on("select",function(t,a,i){var c;c=i?e.data[e.idHash.indexOf(i)]:e.data[e.active],e.checkItem({item:c})}),e.$on("deSelect",function(e,t){}),e.isActive=function(a){if(e.active<t.find("li").length)return e.active===a;e.active=0},e.checkItem=function(t){e.attr=a,t.item.notSelectable||(e.checkSelection(t),e.callback({item:{id:t.item.id,name:t.item.name,allSelected:e.selectedId,checked:t.item.checked}}))},e.checkSelection=function(t){var a=t.item.id;if(e.selectedId=e.selectedId||[],e.attr.multiSelect){var i=e.selectedId.indexOf(a);i==-1?(e.selectedId.push(a),e.selObj[a]=t.item.name,t.item.checked=!0):(e.selectedId.splice(i,1),delete e.selObj[a],t.item.checked=!1)}else e.selectedId=[],e.selectedId.push(a)}}}}),angular.module("specialist.droope",["specialist.listing","specialist.tagit"]).directive("droope",["$document",function(e){return{scope:{option:"=",callback:"&droopeCallback",data:"=",selectedId:"=",api:"="},restrict:"E",template:'<div class="ddwn"><div class="DDwrap"><ul class="DDsearch"><li class="frst" style="float: none;"><div class="DDinputWrap"><span class="ddIcon srchTxt" ng-click="showDrop()"></span><input type="text" ng-click="showDrop()" id="" class="srchTxt" autocomplete="off" style="color: rgb(68, 68, 68);" ng-model="selectedName"></div></li></ul></div><div class="dd_dwn" ng-show="show"><listing tuplecount="10" multi-select="{{option.multiselect}}" active="activeIndex" selected-id ="selectedId" listing-callback="listingCallback(item)" data="data" filter-name="selectedName"><div><span>{{$parent.item.name}}</span></div></listing></div></div>',replace:!0,transclude:!0,compile:function(t,a){var c={fieldAttr:{placeholder:"Enter your Values"}};return function(t,a,l,s){t.activeIndex=0,a.find("input").on("keydown",function(e){switch(e.which){case 8:""==t.selectedName&&(t.show=!0),t.$digest();break;case 9:t.blurOut();break;case 13:e.stopPropagation(),t.$broadcast("select",this),t.$digest();break;case 38:t.data[t.activeIndex].active=!1,t.activeIndex--,t.data[t.activeIndex].active=!0,t.$digest();break;case 40:t.data[t.activeIndex].active=!1,t.activeIndex++,t.data[t.activeIndex].active=!0,t.$digest()}}),t.options=angular.merge(c,t.option),t.tags=[],a.find("input").attr(t.options.fieldAttr),t.api={resetDroope:function(){t.selectedName="",t.selectedId=[]},selectItem:function(e){Object.prototype.toString.call(e),t.$broadcast("select",this,e)}},t.listingCallback=function(e){var a={id:e.id,name:e.name};t.tagUpdate(a,e.checked)},t.tagUpdate=function(e,a){if(t.option.multiselect)if(a)t.tags.push(e);else{var i=t.tags.indexOf(e);t.tags.splice(i,1)}else t.selectedName=e.name,t.show=!1,t.callback({item:e});event&&event.stopPropagation()},t.showDrop=function(){t.lastSelected=t.selectedName,t.selectedName="",t.show=!0},t.removeAllTags=function(){if(t.tags=[],t.option.multiselect)for(i=0;i<t.selectedId.length;i++){var e=t.data.indexOf(t.selectedId[i]);t.data[e].checked=!1}else t.selectedName=""},t.blurOut=function(){var e={id:"",name:t.selectedName,checked:"no"};t.listingCallback(e)},e.on("click",function(e){angular.element(e.target).hasClass("srchTxt")||(t.show=!1,""==t.selectedName&&(t.selectedName=t.lastSelected)),t.$apply()})}}}}]);
specialist.controller("mainController",["$scope",function(n){var a=[{name:"Delhi"},{name:"Noida"},{name:"Gurgaon"}];n.options={},n.options={data:a,multiselect:!0,maxHeight:250},n.data=[{name:"Delhi"},{name:"Noida"},{name:"Gurgaon"}],n.selectedId=[],n.onClickFunc=function(n){console.log(n)},n.api={}}]);
specialist.controller("SearchCtrl",["$scope","dataService",function(o,t){t.getFullDoctorList().then(function(t){console.log(t),o.doctorList=t})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImRhdGFTZXJ2aWNlLmpzIiwiZG9jU2lnbnVwQ29udHJvbGxlci5qcyIsImRvY3RvclBvcnRhbC5qcyIsImRyb29wZS5qcyIsIm1haW5Db250cm9sbGVyLmpzIiwic2VhcmNoQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJzcGVjaWFsaXN0IiwiYW5ndWxhciIsIm1vZHVsZSIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ0ZW1wbGF0ZVVybCIsIndoZW4iLCJjb250cm9sbGVyIiwiaHRtbDVNb2RlIiwiZmFjdG9yeSIsIiRodHRwIiwiZ2V0RnVsbERvY3Rvckxpc3QiLCJnZXQiLCJ0aGVuIiwicmVzcCIsImRhdGEiLCIkc2NvcGUiLCJzZWNGb3JtIiwiZmlyc3RGb3JtIiwic2lnblVwRGF0YSIsImJyaW5nU2Vjb25kRm9ybSIsIm5hbWUiLCJmbmFtZSIsImVtYWlsIiwiZW1haWxfZXJyIiwicGFzc3dvcmQiLCJwYXNzIiwicGFzc19lcnIiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInNjb3BlIiwidGFncyIsInJlbW92ZSIsInRlbXBsYXRlIiwibGluayIsIiRlbGVtZW50IiwiJGF0dHJzIiwiJGN0cmwiLCIkcGFyZW50IiwibXVsdGlTZWxlY3QiLCJhdHRycyIsInNlbGVjdGVkSWQiLCJjYWxsYmFjayIsImxlbmd0aCIsIiRsYXN0IiwiZmlyc3RSZWFwZXQiLCJpZCIsImFsbFNlbGVjdGVkIiwiY2hlY2tlZCIsImlkSGFzaCIsImluZGV4T2YiLCJmaXJzdCIsInRyYW5zY2x1ZGUiLCJyZXBsYWNlIiwidHVwbGVDb3VudCIsIm1heEhlaWdodCIsImZpbHRlck5hbWUiLCJhY3RpdmUiLCJzZWxPYmoiLCJpRWxlbWVudCIsImlBdHRyIiwiY29udHJvbGxlcnMiLCJmb3JFYWNoIiwieCIsInB1c2giLCJmbGFnIiwiZXZlbnQiLCJzb21lRGF0YSIsImVsZW1Ub1NlbCIsImNoZWNrSXRlbSIsIml0ZW0iLCJpc0FjdGl2ZSIsIm1hdGNoSWR4IiwiZmluZCIsIl90aGlzIiwibm90U2VsZWN0YWJsZSIsImF0dHIiLCJjaGVja1NlbGVjdGlvbiIsInQiLCJpbmRleCIsInNwbGljZSIsImFwaSIsIiRkb2N1bWVudCIsImNvbXBpbGUiLCJfX29wdGlvbnNfXyIsImV2dCIsInN0b3BQcm9wYWdhdGlvbiIsInBsYWNlaG9sZGVyIiwiYWN0aXZlSW5kZXgiLCIkZGlnZXN0Iiwic2VsZWN0ZWROYW1lIiwic2hvdyIsIm9wdGlvbnMiLCJibHVyT3V0IiwiJGJyb2FkY2FzdCIsInRoaXMiLCJyZXNldERyb29wZSIsInNlbGVjdEl0ZW0iLCJPYmplY3QiLCJyZXRPYmoiLCJ0YWdVcGRhdGUiLCJuZXdUYWciLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJ0YWdPYmoiLCJvcHRpb24iLCJtdWx0aXNlbGVjdCIsImxhc3RTZWxlY3RlZCIsImJsdXJPYmoiLCJyZW1vdmVBbGxUYWdzIiwiaSIsIiRhcHBseSIsImxpc3RpbmdDYWxsYmFjayIsIm9uIiwiZWxlbWVudCIsInRhcmdldCIsImhhc0NsYXNzIiwianNvbiIsIm9uQ2xpY2tGdW5jIiwib2JqMSIsImxvZyIsImRhdGFTZXJ2aWNlIiwiY29uc29sZSIsImRvY3Rvckxpc3QiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLFlBQWFDLFFBQVFDLE9BQU8sY0FBZSxVQUFELHNCQUU3Q0MsUUFBQUEsaUJBQXlCLG9CQUFBLFNBQUFBLEVBQUFDLEdBQ3hCQyxFQUFhQyxLQUFBLEtBQ2JDLFlBQVkseUJBRmJBLFdBSU0sbUJBRUxBLEtBQUFBLFdBTkRGLFlBUU0sMkJBQ0xBLFdBQUFBLGVBVERDLEtBWUNBLGlCQUNBRCxZQUFhLGlDQWJkRSxXQWdCTSxxQkFFTEEsS0FBQUEsU0FsQkRGLFlBQUEsOEJBRmdCQyxLQUFqQixjQW1CRUQsWUFBYSw4QkFDYkUsV0FBWSxrQkFJYkgsRUFBa0JJLFdBQVU7QUN4QjdCUixXQUFXUyxRQUFRLGVBQWdCLFFBQUQsU0FBU0MsR0FDMUMsT0FDQ0Msa0JBQUFB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YXIgc3BlY2lhbGlzdCA9IGFuZ3VsYXIubW9kdWxlKCdzcGVjaWFsaXN0JywgWyduZ1JvdXRlJywnc3BlY2lhbGlzdC5kcm9vcGUnXSlcbi5jb25maWcoWyckcm91dGVQcm92aWRlcicsJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdCRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLCB7XG5cdFx0dGVtcGxhdGVVcmw6ICcuL2J1aWxkL2h0bWwvbWFpbi5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnbWFpbkNvbnRyb2xsZXInXG5cdH0pXG5cdC53aGVuKCcvc2VhcmNoJywge1xuXHRcdHRlbXBsYXRlVXJsOiAnLi9idWlsZC9odG1sL3NlYXJjaC5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnU2VhcmNoQ3RybCdcblx0fSlcblx0LndoZW4oJy9kb2N0b3JQb3J0YWwnLCB7XG5cdFx0dGVtcGxhdGVVcmw6ICcuL2J1aWxkL2h0bWwvZG9jdG9yUG9ydGFsLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdkb2N0b3JQb3J0YWxDdHJsJ1xuXHR9KVxuXHQud2hlbignL3F1ZXMnLCB7XG5cdFx0dGVtcGxhdGVVcmw6ICcuL2J1aWxkL2h0bWwvcXVlc2Fucy5odG1sJyxcblx0XHQvL2NvbnRyb2xsZXI6ICdRdWVzQ3RybCdcblx0fSlcblx0LndoZW4oJy9kb2NTaWdudXAnLCB7XG5cdFx0dGVtcGxhdGVVcmw6ICcuL2J1aWxkL2h0bWwvZG9jU2lnbnVwLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdkb2NTaWdudXBDdHJsJ1xuXHR9KVxuXG5cblx0JGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xufV0pOyIsInNwZWNpYWxpc3QuZmFjdG9yeSgnZGF0YVNlcnZpY2UnLCBbJyRodHRwJyxmdW5jdGlvbiAoJGh0dHApIHtcblx0cmV0dXJuIHtcblx0XHRnZXRGdWxsRG9jdG9yTGlzdDpmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnaHR0cDovLzAuMC4wLjA6ODA4MC9kb2N0b3IvbGlzdCcpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG5cdFx0XHRcdHJldHVybiByZXNwLmRhdGE7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG59XSkiLCJzcGVjaWFsaXN0LmNvbnRyb2xsZXIoJ2RvY1NpZ251cEN0cmwnLCBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcblx0JHNjb3BlLnNlY0Zvcm0gPSBmYWxzZTtcblx0JHNjb3BlLmZpcnN0Rm9ybSA9IHRydWU7XG5cdHZhciBzaWduVXBEYXRhID0ge307XG5cdCRzY29wZS5icmluZ1NlY29uZEZvcm0gPSBmdW5jdGlvbigpe1xuXHRcdHNpZ25VcERhdGEubmFtZSA9ICRzY29wZS5mbmFtZSArXCIgXCIrICRzY29wZS5sbmFtZTtcblx0XHRpZigkc2NvcGUuZW1haWwgPT0gJHNjb3BlLmNvbmZFbWFpbCl7XG5cdFx0XHRzaWduVXBEYXRhLmVtYWlsID0gJHNjb3BlLmVtYWlsO1xuXG5cdFx0fWVsc2V7XG5cdFx0XHQkc2NvcGUuZW1haWxfZXJyID0gdHJ1ZTtcblx0XHR9XG5cdFx0aWYoJHNjb3BlLnBhc3MgPT0gJHNjb3BlLmNvbmZQYXNzKXtcblx0XHRcdHNpZ25VcERhdGEucGFzc3dvcmQgPSAkc2NvcGUucGFzcztcblx0XHR9ZWxzZXtcblx0XHRcdCRzY29wZS5wYXNzX2VyciA9IHRydWU7XG5cdFx0fVxuXHRcdGlmKCEkc2NvcGUucGFzc19lcnIgJiYgISRzY29wZS5lbWFpbF9lcnIpe1xuXHRcdFx0JHNjb3BlLnNlY0Zvcm0gPSB0cnVlO1xuXHRcdFx0JHNjb3BlLmZpcnN0Rm9ybSA9IGZhbHNlO1xuXHRcdH1cblx0fVxufV0pIiwic3BlY2lhbGlzdC5jb250cm9sbGVyKCdkb2N0b3JQb3J0YWxDdHJsJywgWyckc2NvcGUnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG5cdFxufV0pIiwiYW5ndWxhci5tb2R1bGUoJ3NwZWNpYWxpc3QudGFnaXQnLCBbXSlcbiAgICAuZGlyZWN0aXZlKCd0YWdJdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgIHRhZ3M6IFwiPVwiLFxuICAgICAgICAgICAgICAgIHJlbW92ZTogXCImXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXY+PHVsIGNsYXNzPVwidGFnc1wiPjxsaSAgY2xhc3M9XCJ0YWdpdFwiIG5nLXJlcGVhdD1cInRhZyBpbiB0YWdzIFwiPjxzcGFuIGNsYXNzPVwidGFnVGV4dFwiPnt7Ojp0YWcubmFtZX19PC9zcGFuPjxhICBuZy1jbGljaz1cInJlbW92ZSh7aWR4OnRhZy5pZH0pXCIgY2xhc3M9XCJkQ3Jvc3NcIiBocmVmPVwiamF2YXNjcmlwdDo7XCI+eDwvYT48L2xpPjwvdWw+PC9kaXY+JyxcblxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkY3RybCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCRzY29wZSwgJGF0dHJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnc3BlY2lhbGlzdC5saXN0aW5nJywgW10pXG4gICAgIC5kaXJlY3RpdmUoJ25nUmVwZWF0RG9uZU5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cbiAgICAgICAgICAgIGlmICghc2NvcGUuJHBhcmVudC5tdWx0aVNlbGVjdCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlLnNlbGVjdGVkSWQgJiYgc2NvcGUuc2VsZWN0ZWRJZC5sZW5ndGghPTAgJiYgc2NvcGUuJGxhc3QgJiYgIXNjb3BlLiRwYXJlbnQuZmlyc3RSZWFwZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHBhcmVudC5maXJzdFJlYXBldCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdpdGVtJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzY29wZS5zZWxlY3RlZElkWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNjb3BlLmRhdGFbc2NvcGUuaWRIYXNoLmluZGV4T2Yoc2NvcGUuc2VsZWN0ZWRJZFswXSldLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsU2VsZWN0ZWQ6IHNjb3BlLnNlbGVjdGVkSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNjb3BlLiRwYXJlbnQuaWRIYXNoKTtcbiAgICAgICAgfTtcbiAgICB9KS5kaXJlY3RpdmUoJ2xpc3RpbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEnOiAnPScsXG4gICAgICAgICAgICAgICAgJ3R1cGxlQ291bnQnOiAnQCcsXG4gICAgICAgICAgICAgICAgJ3NlbGVjdGVkSWQnOiAnPScsXG4gICAgICAgICAgICAgICAgJ21heEhlaWdodCc6ICdAJyxcbiAgICAgICAgICAgICAgICAnY2FsbGJhY2snOiAnJmxpc3RpbmdDYWxsYmFjaycsXG4gICAgICAgICAgICAgICAgJ211bHRpU2VsZWN0JzogJ0AnLFxuICAgICAgICAgICAgICAgICdmaWx0ZXJOYW1lJzogXCI9XCIsXG4gICAgICAgICAgICAgICAgJ2FjdGl2ZSc6ICc9J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vdGVtcGxhdGU6ICc8dWw+PGxpIG5nLXJlcGVhdD1cIml0ZW0gaW4gZGF0YXxsaW1pdFRvOnR1cGxlQ291bnRcIiBuZy1yZXBlYXQtZG9uZS1ub3RpZmljYXRpb249e3tpdGVtLmlkfX0gbmctY2xpY2s9XCJjaGVja0l0ZW0odGhpcylcIj48aW5wdXQgbmctaWY9XCJtdWx0aVNlbGVjdFwiIHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPWl0ZW0uY2hlY2tlZD48ZGl2IHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7XCIgbmctdHJhbnNjbHVkZT48L2Rpdj48L2xpPjwvdWw+JyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHVsPjxsaSBuZy1yZXBlYXQ9XCJpdGVtIGluIGRhdGFcIiBuZy1yZXBlYXQtZG9uZS1ub3RpZmljYXRpb249e3tpdGVtLmlkfX0gbmctY2xpY2s9XCJjaGVja0l0ZW0odGhpcylcIiBuZy1jbGFzcz1cInthY3RpdmU6aXRlbS5hY3RpdmUsIG5vdFNlbGVjdGFibGU6aXRlbS5ub3RTZWxlY3RhYmxlfVwiPjxpbnB1dCBuZy1pZj1cIm11bHRpU2VsZWN0ID09IFxcJ3RydWVcXCcgJiYgIWl0ZW0ubm90U2VsZWN0YWJsZVwiIHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPWl0ZW0uY2hlY2tlZD57e3NlbGVjdGVkTmFtZX19PGRpdiBzdHlsZT1cImRpc3BsYXk6aW5saW5lLWJsb2NrOyB3aWR0aDphdXRvO1wiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+PC9saT48L3VsPicsXG5cbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBpRWxlbWVudCwgaUF0dHIsIGNvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuZmlyc3RSZWFwZXQgPSAwO1xuICAgICAgICAgICAgICAgIHNjb3BlLnNlbE9iaiA9IHt9O1xuICAgICAgICAgICAgICAgIHNjb3BlLmlkSGFzaCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChzY29wZS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmRhdGEuZm9yRWFjaChmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5pZEhhc2gucHVzaCh4LmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2NvcGUuJG9uKCdzZWxlY3QnLCBmdW5jdGlvbihldmVudCwgc29tZURhdGEsIGZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1Ub1NlbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1Ub1NlbCA9IHNjb3BlLmRhdGFbc2NvcGUuaWRIYXNoLmluZGV4T2YoZmxhZyldO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbVRvU2VsID0gc2NvcGUuZGF0YVtzY29wZS5hY3RpdmVdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuY2hlY2tJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdpdGVtJzogZWxlbVRvU2VsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignZGVTZWxlY3QnLGZ1bmN0aW9uKGV2ZW50LGlkKXtcblxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICBzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uKG1hdGNoSWR4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZS5hY3RpdmUgPCBpRWxlbWVudC5maW5kKCdsaScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLmFjdGl2ZSA9PT0gbWF0Y2hJZHg7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5hY3RpdmUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIHJldHVybiBzY29wZS5hY3RpdmUgPT09IG1hdGNoSWR4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNjb3BlLmNoZWNrSXRlbSA9IGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuYXR0ciA9IGlBdHRyO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pdGVtLm5vdFNlbGVjdGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaUVsZW1lbnQuYWRkQ2xhc3MoJ25vdFNlbGVjdGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmNoZWNrU2VsZWN0aW9uKF90aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBzY29wZS5jYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaXRlbSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXMuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBfdGhpcy5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsU2VsZWN0ZWQ6IHNjb3BlLnNlbGVjdGVkSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogX3RoaXMuaXRlbS5jaGVja2VkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgICAgIHNjb3BlLmNoZWNrU2VsZWN0aW9uID0gZnVuY3Rpb24odCkgeyAvLyBhcnJheSBhbmQgc2VsZWN0ZWRJZCB3aWxsIGJlIHRoZSBzYW1lIGFmdGVyIHRoaXMsIFxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSB0Lml0ZW0uaWQ7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdGVkSWQgPSBzY29wZS5zZWxlY3RlZElkIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGUuYXR0ci5tdWx0aVNlbGVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gc2NvcGUuc2VsZWN0ZWRJZC5pbmRleE9mKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdGVkSWQucHVzaChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsT2JqW2lkXSA9IHQuaXRlbS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaXRlbS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0ZWRJZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY29wZS5zZWxPYmpbaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaXRlbS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdGVkSWQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdGVkSWQucHVzaChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3QuaXRlbS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdzcGVjaWFsaXN0LmRyb29wZScsIFsnc3BlY2lhbGlzdC5saXN0aW5nJywgJ3NwZWNpYWxpc3QudGFnaXQnXSlcblxuLmRpcmVjdGl2ZSgnZHJvb3BlJywgW1wiJGRvY3VtZW50XCIsIGZ1bmN0aW9uKCRkb2N1bWVudCkge1xuICAgIC8vIFJ1bnMgZHVyaW5nIGNvbXBpbGVcbiAgICByZXR1cm4ge1xuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgb3B0aW9uOiBcIj1cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiBcIiZkcm9vcGVDYWxsYmFja1wiLFxuICAgICAgICAgICAgZGF0YTogXCI9XCIsXG4gICAgICAgICAgICBzZWxlY3RlZElkOiBcIj1cIixcbiAgICAgICAgICAgIGFwaTogXCI9XCJcbiAgICAgICAgfSxcbiAgICAgICAgLy8gY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkdHJhbnNjbHVkZSkge30sXG4gICAgICAgIHJlc3RyaWN0OiAnRScsIC8vIEUgPSBFbGVtZW50LCBBID0gQXR0cmlidXRlLCBDID0gQ2xhc3MsIE0gPSBDb21tZW50XG4gICAgICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImRkd25cIj4nICtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiRER3cmFwXCI+JyArXG4gICAgICAgICAgICAnPHVsIGNsYXNzPVwiRERzZWFyY2hcIj4nICtcbiAgICAgICAgICAgICc8bGkgY2xhc3M9XCJmcnN0XCIgc3R5bGU9XCJmbG9hdDogbm9uZTtcIj4nICtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiRERpbnB1dFdyYXBcIj4nICtcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImRkSWNvbiBzcmNoVHh0XCIgbmctY2xpY2s9XCJzaG93RHJvcCgpXCI+PC9zcGFuPicgK1xuICAgICAgICAgICAgJzxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLWNsaWNrPVwic2hvd0Ryb3AoKVwiIGlkPVwiXCIgY2xhc3M9XCJzcmNoVHh0XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgc3R5bGU9XCJjb2xvcjogcmdiKDY4LCA2OCwgNjgpO1wiIG5nLW1vZGVsPVwic2VsZWN0ZWROYW1lXCI+JyArXG4gICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAnPC9saT4nICtcbiAgICAgICAgICAgICc8L3VsPicgK1xuICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkZF9kd25cIiBuZy1zaG93PVwic2hvd1wiPicgK1xuICAgICAgICAgICAgJzxsaXN0aW5nIHR1cGxlY291bnQ9XCIxMFwiIG11bHRpLXNlbGVjdD1cInt7b3B0aW9uLm11bHRpc2VsZWN0fX1cIiBhY3RpdmU9XCJhY3RpdmVJbmRleFwiIHNlbGVjdGVkLWlkID1cInNlbGVjdGVkSWRcIiBsaXN0aW5nLWNhbGxiYWNrPVwibGlzdGluZ0NhbGxiYWNrKGl0ZW0pXCIgZGF0YT1cImRhdGFcIiBmaWx0ZXItbmFtZT1cInNlbGVjdGVkTmFtZVwiPicgK1xuICAgICAgICAgICAgJzxkaXY+PHNwYW4+e3skcGFyZW50Lml0ZW0ubmFtZX19PC9zcGFuPjwvZGl2PicgK1xuICAgICAgICAgICAgJzwvbGlzdGluZz4nICtcbiAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICc8L2Rpdj4nLFxuICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICBjb21waWxlOiBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7XG4gICAgICAgICAgICB2YXIgX19vcHRpb25zX18gPSB7XG4gICAgICAgICAgICAgICAgZmllbGRBdHRyOiB7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgeW91ciBWYWx1ZXMnXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxpbmtpbmcoc2NvcGUsIGlFbG0sIGlBdHRycywgY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHNjb3BlLmFjdGl2ZUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGlFbG0pO1xuICAgICAgICAgICAgICAgIC8vYmluZCBrZXlib2FyZCBldmVudHM6IGFycm93cyB1cCgzOCkgLyBkb3duKDQwKSwgZW50ZXIoMTMpIGFuZCB0YWIoOSksIGVzYygyNylcbiAgICAgICAgICAgICAgICBpRWxtLmZpbmQoJ2lucHV0Jykub24oJ2tleWRvd24nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChldnQud2hpY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGUuc2VsZWN0ZWROYW1lID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5ibHVyT3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYnJvYWRjYXN0KCdzZWxlY3QnLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmRhdGFbc2NvcGUuYWN0aXZlSW5kZXhdLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmFjdGl2ZUluZGV4LS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuZGF0YVtzY29wZS5hY3RpdmVJbmRleF0uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmRhdGFbc2NvcGUuYWN0aXZlSW5kZXhdLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmFjdGl2ZUluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuZGF0YVtzY29wZS5hY3RpdmVJbmRleF0uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzY29wZS5vcHRpb25zID0gYW5ndWxhci5tZXJnZShfX29wdGlvbnNfXywgc2NvcGUub3B0aW9uKTtcbiAgICAgICAgICAgICAgICBzY29wZS50YWdzID0gW107XG4gICAgICAgICAgICAgICAgaUVsbS5maW5kKCdpbnB1dCcpLmF0dHIoc2NvcGUub3B0aW9ucy5maWVsZEF0dHIpXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogW2Z1bmN0aW9uIGNhbGxlZCBvbiBsaXN0IGNsaWNrLSBhZnRlciBsaXN0aW5nIGNhbGxiYWNrXVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSAge1t0eXBlXX0gcmV0T2JqIFtvYmplY3QgZnJvbSBsaXN0aW5nIGNhbGxiYWNrXVxuICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge1t0eXBlXX0gICAgICBbdGFncyBvYmplY3QgdXBkYXRlZF1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBzY29wZS5hcGkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0RHJvb3BlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2NvcGUuYWN0aXZlID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zZWxlY3RlZE5hbWUgPSBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2VsZWN0ZWRJZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RJdGVtOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCBpZCApID09PSAnW29iamVjdCBBcnJheV0nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGJyb2FkY2FzdCgnc2VsZWN0Jyx0aGlzLGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGJyb2FkY2FzdCgnc2VsZWN0JywgdGhpcywgaWQpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzY29wZS5saXN0aW5nQ2FsbGJhY2sgPSBmdW5jdGlvbihyZXRPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RhZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXRPYmouaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXRPYmoubmFtZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBzY29wZS50YWdVcGRhdGUobmV3VGFnLCByZXRPYmouY2hlY2tlZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2NvcGUudGFnVXBkYXRlID0gZnVuY3Rpb24odGFnT2JqLCBjaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZS5vcHRpb24ubXVsdGlzZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUudGFncy5wdXNoKHRhZ09iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHNjb3BlLnRhZ3MuaW5kZXhPZih0YWdPYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnRhZ3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNlbGVjdGVkTmFtZSA9IHRhZ09iai5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJpdGVtXCI6IHRhZ09ialxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFtjYWxsZWQgb24gaW5wdXQgZm9jdXMgLSB3aWxsIHNob3cgdGhlIGxpc3RdXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgc2NvcGUuc2hvd0Ryb3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHNjb3BlLm9wdGlvbi5tdWx0aXNlbGVjdCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5sYXN0U2VsZWN0ZWQgPSBzY29wZS5zZWxlY3RlZE5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zZWxlY3RlZE5hbWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHBhckVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXJhREQnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHNjcm9sbENvbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGRfZHduJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBmc3RFbG0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGRfZHduJykuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaVwiKVswXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2NvcGUuc2Nyb2xsSGFuZGxlcihwYXJFbG0sIHNjcm9sbENvbnQsIGZzdEVsbSwgZnN0RWxtKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogW3JlbW92aW5nIGFsbCB0YWdzXVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHNjb3BlLnJlbW92ZUFsbFRhZ3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudGFncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGUub3B0aW9uLm11bHRpc2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2NvcGUuc2VsZWN0ZWRJZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHNjb3BlLmRhdGEuaW5kZXhPZihzY29wZS5zZWxlY3RlZElkW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5kYXRhW2luZGV4XS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zZWxlY3RlZE5hbWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNjb3BlLmJsdXJPdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsdXJPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNjb3BlLnNlbGVjdGVkTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6ICdubydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBzY29wZS5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzY29wZS5saXN0aW5nQ2FsbGJhY2soYmx1ck9iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFtoaWRlIGxpc3QgZHJvcCBvbiBkb2N1bWVudCBjbGlja11cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkZG9jdW1lbnQub24oXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpLmhhc0NsYXNzKCdzcmNoVHh0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNjb3BlLnNlbGVjdGVkTmFtZSA9PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zZWxlY3RlZE5hbWUgPSBzY29wZS5sYXN0U2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgLy8gIHNjb3BlLmJsdXJPdXQoKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XSk7Iiwic3BlY2lhbGlzdC5jb250cm9sbGVyKCdtYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24gKCRzY29wZSkge1xuXHR2YXIganNvbiA9IFt7J25hbWUnOidEZWxoaSd9LHsnbmFtZSc6J05vaWRhJ30seyduYW1lJzonR3VyZ2Fvbid9XVxuXHQkc2NvcGUub3B0aW9ucyA9IHt9O1xuXHQkc2NvcGUub3B0aW9ucyA9IHtcblx0XHRkYXRhOmpzb24sXG5cdFx0bXVsdGlzZWxlY3Q6dHJ1ZSxcblx0XHRtYXhIZWlnaHQ6IDI1MFxuXHR9O1xuXHRcdCRzY29wZS5kYXRhID0gW3snbmFtZSc6J0RlbGhpJ30seyduYW1lJzonTm9pZGEnfSx7J25hbWUnOidHdXJnYW9uJ31dXG4gICAgICAgICRzY29wZS5zZWxlY3RlZElkID0gW107XG4gICAgICAgICRzY29wZS5vbkNsaWNrRnVuYyA9IGZ1bmN0aW9uKG9iajEpIHtcbiAgICAgICAgICAgIC8vJHNjb3BlLmNiT2JqID0gb2JqO1xuICAgICAgICAgIGNvbnNvbGUubG9nKG9iajEpO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5hcGkgPSB7fTtcbn1dKSIsInNwZWNpYWxpc3QuY29udHJvbGxlcignU2VhcmNoQ3RybCcsIFsnJHNjb3BlJywnZGF0YVNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLGRhdGFTZXJ2aWNlKSB7XG5cdGRhdGFTZXJ2aWNlLmdldEZ1bGxEb2N0b3JMaXN0KCkudGhlbihmdW5jdGlvbihkYXRhKXtcblx0XHRjb25zb2xlLmxvZyhkYXRhKTtcblx0XHQkc2NvcGUuZG9jdG9yTGlzdCA9IGRhdGE7XG5cdH0pO1xufV0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
